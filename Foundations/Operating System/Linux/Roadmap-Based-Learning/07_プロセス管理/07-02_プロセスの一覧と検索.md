# 【Linux講座】プロセスの一覧と検索

## 1. トピックの概要と重要性
Linuxにおいて、プロセス管理はシステム運用の基本であり、実行中のプロセスを一覧表示・検索する能力はシステムのパフォーマンス監視やトラブルシューティングに不可欠です。

## 2. 主要概念の理論的説明
プロセスとはプログラムの実行インスタンスであり、各プロセスには固有のプロセスID（PID）が割り当てられ、/procファイルシステムを通じて詳細情報にアクセスできます。

## 3. 実際に試せるコマンド例

### 基本的なプロセス一覧表示

まずは、現在実行中のプロセスを一覧表示するもっとも基本的なコマンドを試してみましょう。

```bash
ps -ef
```

このコマンドを入力して実行してみましょう。以下のような出力が表示されます：

```
UID        PID  PPID  C STIME TTY          TIME CMD
root         1     0  0 09:12 ?        00:00:03 /sbin/init
root         2     0  0 09:12 ?        00:00:00 [kthreadd]
...
username  1234  1200  0 09:15 pts/0    00:00:00 bash
username  2345  1234  0 09:20 pts/0    00:00:00 ps -ef
```

`ps -ef` コマンドの出力には以下の情報が含まれています：
- `UID`: プロセスを実行しているユーザーID
- `PID`: プロセスID
- `PPID`: 親プロセスID
- `C`: CPU使用率
- `STIME`: プロセスの開始時間
- `TTY`: プロセスが関連付けられている端末
- `TIME`: プロセスが使用したCPU時間
- `CMD`: 実行されているコマンド

### プロセスをリアルタイムで監視

次に、システムのプロセスをリアルタイムで監視するコマンドを試してみましょう。

```bash
top
```

このコマンドを入力して実行してみましょう。以下のような出力が表示され、自動的に更新されます：

```
top - 09:22:15 up  0:10,  1 user,  load average: 0.15, 0.21, 0.25
Tasks: 213 total,   1 running, 212 sleeping,   0 stopped,   0 zombie
%Cpu(s):  2.0 us,  1.0 sy,  0.0 ni, 97.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   7861.8 total,   6234.5 free,    845.2 used,    782.1 buff/cache
MiB Swap:   2048.0 total,   2048.0 free,      0.0 used.   6775.8 avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
 1234 username  20   0   10256   3240   2512 S   0.0   0.0   0:00.15 bash
 2468 username  20   0   11512   3924   3256 R   0.3   0.0   0:00.05 top
```

`top` コマンドを終了するには、キーボードの「q」キーを押します。

このコマンドはシステムのリソース使用状況とプロセスの一覧をリアルタイムで表示します。上部にはシステム全体の情報が、下部には個々のプロセスの情報が表示されます。

### より見やすいインターフェイスを使用

`htop` はより視覚的で使いやすいプロセスモニターです。まだインストールされていない場合は、以下のコマンドでインストールできます：

Ubuntu/Debian系：
```bash
sudo apt install htop
```

Fedora/RHEL系：
```bash
sudo dnf install htop
```

インストール後、以下のコマンドを入力して実行してみましょう：

```bash
htop
```

`htop` はカラフルで対話的なインターフェイスを提供し、マウスでの操作も可能です。`htop` を終了するには、「F10」キーまたは「q」キーを押します。

### 特定のプロセスを検索

例えば、「firefox」という名前のプロセスを検索する場合：

```bash
ps aux | grep firefox
```

このコマンドを入力して実行してみましょう。以下のような出力が表示されます：

```
username  3456  2.5  4.2 2345678 345678 ?    Sl   08:30   0:45 /usr/lib/firefox/firefox
username  4567  0.0  0.0   9876   1234 pts/0 S+   09:25   0:00 grep firefox
```

このコマンドは2つの部分から構成されています：
- `ps aux`: すべてのプロセスの詳細情報を表示
- `grep firefox`: 出力から「firefox」を含む行のみをフィルタリング

### プロセスIDから詳細情報を取得

特定のプロセスIDの詳細情報を確認するには、`/proc`ファイルシステムを使用します。

例えば、PID 1234のステータス情報を確認する場合：

```bash
cat /proc/1234/status
```

このコマンドを入力して実行してみましょう（1234は実際に実行中のプロセスIDに置き換えてください）。以下のような出力が表示されます：

```
Name:   bash
Umask:  0022
State:  S (sleeping)
Tgid:   1234
Ngid:   0
Pid:    1234
PPid:   1200
...
```

この出力には、プロセス名、状態、PID、親PID、メモリ使用量など、プロセスに関する詳細情報が含まれています。

### システム全体のプロセス統計を確認

システム全体のプロセス統計情報を確認するには：

```bash
cat /proc/stat
```

このコマンドを入力して実行してみましょう。以下のような出力が表示されます：

```
cpu  12345 678 9012 345678 901 23 456 0 0 0
cpu0 2345 123 1234 56789 123 4 56 0 0 0
...
intr 1234567 ...
ctxt 12345678
btime 1617012345
processes 12345
procs_running 1
procs_blocked 0
...
```

この出力には、CPUの使用時間、割り込み、コンテキストスイッチ、起動時間、作成されたプロセスの総数などの情報が含まれています。

### 特定のユーザーのプロセスを表示

特定のユーザーが実行しているプロセスだけを表示したい場合：

```bash
ps -u username
```

このコマンドを入力して実行してみましょう（「username」は実際のユーザー名に置き換えてください）。以下のような出力が表示されます：

```
  PID TTY          TIME CMD
 1234 pts/0    00:00:00 bash
 2345 pts/0    00:00:00 ps
```

このコマンドは指定したユーザーが実行しているプロセスのみを表示します。
