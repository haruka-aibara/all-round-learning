# 【Linux講座】tr コマンド

## 概要
trコマンドは文字の置換や削除を行うLinuxの強力なテキスト処理ツールで、標準入力からテキストを読み取り、文字単位での変換を適用します。

## 主要概念
trは「translate」または「transform」の略で、標準入力から読み取ったテキストを指定したルールに従って変換し、標準出力に書き出します。

## 実践コマンド例

### 1. 文字の置換

以下のコマンドを入力して実行してみましょう：

```bash
echo "Hello World" | tr 'a-z' 'A-Z'
```

期待される出力：
```
HELLO WORLD
```

**解説**：
このコマンドは「Hello World」の小文字（a-z）をすべて大文字（A-Z）に変換します。`tr`はストリーム処理なので、パイプ（|）で前のコマンドの出力を受け取っています。

### 2. 特定の文字を置換する

以下のコマンドを入力して実行してみましょう：

```bash
echo "Hello World" | tr 'ol' '01'
```

期待される出力：
```
He110 W0r1d
```

**解説**：
このコマンドは文字「o」を「0」に、文字「l」を「1」に置換します。第1引数の各文字が第2引数の対応する位置の文字に変換されます。

### 3. 文字の削除

以下のコマンドを入力して実行してみましょう：

```bash
echo "Hello World 123" | tr -d '0-9'
```

期待される出力：
```
Hello World 
```

**解説**：
`-d`オプションを使用すると、指定した文字を削除します。この例では、数字（0-9）をすべて削除しています。

### 4. 補集合を使った操作

以下のコマンドを入力して実行してみましょう：

```bash
echo "Hello World 123" | tr -cd 'a-zA-Z\n'
```

期待される出力：
```
HelloWorld
```

**解説**：
`-c`オプションは補集合を表します。この例では、`-cd`の組み合わせで「アルファベットと改行以外の文字をすべて削除」しています。数字やスペースが削除されているのがわかります。

### 5. 重複文字の圧縮

以下のコマンドを入力して実行してみましょう：

```bash
echo "Hello      World" | tr -s ' '
```

期待される出力：
```
Hello World
```

**解説**：
`-s`オプション（squeeze-repeats）は、指定した文字の連続する出現を1つに圧縮します。この例では、複数の連続するスペースを1つのスペースに圧縮しています。

### 6. 改行の置換

以下のコマンドを入力して実行してみましょう：

```bash
echo -e "Hello\nWorld" | tr '\n' ' '
```

期待される出力：
```
Hello World
```

**解説**：
このコマンドは改行文字（\n）をスペースに置換しています。複数行のテキストを1行にまとめる際に便利です。`echo -e`オプションはバックスラッシュを含むエスケープシーケンスを解釈するために必要です。

### 7. 大文字小文字の反転

以下のコマンドを入力して実行してみましょう：

```bash
echo "Hello World" | tr 'a-zA-Z' 'A-Za-z'
```

期待される出力：
```
hELLO wORLD
```

**解説**：
このコマンドは小文字を大文字に、大文字を小文字に変換します。パターン「a-zA-Z」は「a-zのあとにA-Z」を意味し、「A-Za-z」は「A-Zのあとにa-z」を意味します。

### 8. ファイルの内容を処理する

テスト用のファイルを作成し、処理してみましょう：

```bash
echo "Hello World 123\nTest 456" > test.txt
cat test.txt | tr 'a-z' 'A-Z'
```

期待される出力：
```
HELLO WORLD 123
TEST 456
```

**解説**：
ファイルの内容を`cat`コマンドで読み取り、その出力を`tr`コマンドに渡しています。テキストファイル内のすべての小文字が大文字に変換されます。

### 9. 非印字文字の削除

以下のコマンドを入力して実行してみましょう：

```bash
echo -e "Hello\tWorld\t123" | tr -d '\t'
```

期待される出力：
```
HelloWorld123
```

**解説**：
このコマンドはタブ文字（\t）をすべて削除します。非表示文字や制御文字を削除する際に便利です。

### 10. 文字クラスを使った操作

以下のコマンドを入力して実行してみましょう：

```bash
echo "Hello World 123" | tr '[:lower:]' '[:upper:]'
```

期待される出力：
```
HELLO WORLD 123
```

**解説**：
`tr`コマンドでは文字クラスも使用できます。この例では、`[:lower:]`（すべての小文字）を`[:upper:]`（すべての大文字）に変換しています。これは`tr 'a-z' 'A-Z'`と同等の処理ですが、より明示的で言語設定に依存しにくい方法です。
