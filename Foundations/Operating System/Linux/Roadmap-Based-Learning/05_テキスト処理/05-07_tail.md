# 【Linux講座】tail

## 概要
tail コマンドはファイルの末尾部分を表示するためのコマンドで、特にログファイルのモニタリングなど最新の情報を確認する際に非常に便利です。

## 理論的説明
tail コマンドはデフォルトでファイルの最後の10行を表示し、-f オプションを使用すると追記されるデータをリアルタイムで監視できます。

## 実践コマンド例

### 1. 基本的な使い方

以下のコマンドを入力して実行してみましょう：

```bash
echo -e "1行目\n2行目\n3行目\n4行目\n5行目\n6行目\n7行目\n8行目\n9行目\n10行目\n11行目\n12行目" > sample.txt
tail sample.txt
```

実行結果：
```
3行目
4行目
5行目
6行目
7行目
8行目
9行目
10行目
11行目
12行目
```

**解説**：
このコマンドでは、まず12行のテキストファイルを作成し、次に `tail` コマンドでファイルの末尾10行を表示しています。デフォルトでは最後の10行が表示されるため、1行目と2行目は表示されていません。

### 2. 表示行数の指定

以下のコマンドを入力して実行してみましょう：

```bash
tail -n 5 sample.txt
```

実行結果：
```
8行目
9行目
10行目
11行目
12行目
```

**解説**：
`-n 5` オプションを使用すると、ファイルの末尾から5行だけを表示します。行数は任意の値に変更できます。

### 3. バイト単位での表示

以下のコマンドを入力して実行してみましょう：

```bash
tail -c 20 sample.txt
```

実行結果（例）：
```
10行目
11行目
12行目
```

**解説**：
`-c 20` オプションは、ファイルの末尾から20バイト分のデータのみを表示します。実際の出力は文字コードやファイルの内容によって異なる場合があります。

### 4. ファイルの監視（リアルタイム表示）

以下のコマンドを入力して実行してみましょう：

```bash
tail -f sample.txt
```

実行結果：
（現在のファイル末尾10行が表示され、その後ファイルへの追記があると自動的に表示されます）

**解説**：
`-f` オプション（follow の略）を使用すると、ファイルへの追記を監視し、新しい行が追加されるとリアルタイムで表示します。これはログファイルの監視に特に便利です。Ctrl+C でコマンドを終了できます。

追記のテストには別のターミナルで以下を実行してみましょう：
```bash
echo "新しく追加された行" >> sample.txt
```

### 5. 複数ファイルの末尾を表示

以下のコマンドを入力して実行してみましょう：

```bash
echo -e "ファイルA：1行目\nファイルA：2行目\nファイルA：3行目" > fileA.txt
echo -e "ファイルB：1行目\nファイルB：2行目\nファイルB：3行目" > fileB.txt
tail fileA.txt fileB.txt
```

実行結果：
```
==> fileA.txt <==
ファイルA：1行目
ファイルA：2行目
ファイルA：3行目

==> fileB.txt <==
ファイルB：1行目
ファイルB：2行目
ファイルB：3行目
```

**解説**：
複数のファイル名を指定すると、各ファイルの末尾を順番に表示します。ファイル名のヘッダーも一緒に表示されるため、どの出力がどのファイルからのものかが分かります。

### 6. ヘッダーを非表示にする

以下のコマンドを入力して実行してみましょう：

```bash
tail -q fileA.txt fileB.txt
```

実行結果：
```
ファイルA：1行目
ファイルA：2行目
ファイルA：3行目
ファイルB：1行目
ファイルB：2行目
ファイルB：3行目
```

**解説**：
`-q`（quiet）オプションを使用すると、複数ファイルを表示する際にファイル名のヘッダーが表示されなくなります。

### 7. ログファイルの監視例

実際のログファイルを監視する例です。システムログを監視してみましょう（root権限が必要な場合があります）：

```bash
sudo tail -f /var/log/syslog
```

実行結果：
（システムログの最後の10行が表示され、新しいログが追加されると自動的に表示されます）

**解説**：
この例では、システムログファイルの末尾をリアルタイムで監視しています。システムイベントが発生するとリアルタイムでログが表示されるため、システム管理やトラブルシューティングに非常に役立ちます。Ctrl+C でコマンドを終了できます。
