# Linux環境変数の基本

## 概要と重要性
環境変数はLinuxシステムにおいて、実行中のプロセスの動作に影響を与える名前付きの動的な値であり、シェルセッションのカスタマイズやアプリケーション間の設定共有に不可欠です。

## 主要概念
環境変数はシェルセッションごとに存在し、ユーザーのホームディレクトリ、コマンド検索パス、ターミナルタイプ、プログラム設定などの情報を含む、動的に変更可能な名前と値のペアです。

## 実践コマンド例

### 1. 現在の環境変数を一覧表示する

以下のコマンドを入力して実行してみましょう：

```bash
env
```

実行結果：
```
SHELL=/bin/bash
PWD=/home/user
USER=user
HOME=/home/user
PATH=/usr/local/bin:/usr/bin:/bin
...（その他多数の変数が表示されます）
```

このコマンドは現在のシェルセッションで利用可能なすべての環境変数とその値を表示します。出力される情報は多いですが、システムの設定状況を把握するのに役立ちます。

### 2. 特定の環境変数の値を表示する

以下のコマンドを入力して実行してみましょう：

```bash
echo $PATH
```

実行結果：
```
/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
```

`$PATH`は、コマンドを実行する際に検索されるディレクトリのリストです。コロン（:）で区切られた各パスがコマンドを探す順番を示しています。

また、他の環境変数も確認してみましょう：

```bash
echo $HOME
```

実行結果：
```
/home/user
```

`$HOME`はユーザーのホームディレクトリを示す環境変数です。多くのアプリケーションがこの変数を参照して設定ファイルの保存場所などを決定します。

### 3. 一時的に環境変数を設定する

以下のコマンドを入力して実行してみましょう：

```bash
export MY_VAR="Hello, Linux"
```

実行結果：
（表示なし）

このコマンドは`MY_VAR`という新しい環境変数を作成し、"Hello, Linux"という値を設定します。`export`コマンドを使うことで、この変数は現在のシェルセッションと、そこから起動される子プロセスで利用可能になります。

設定した変数を確認してみましょう：

```bash
echo $MY_VAR
```

実行結果：
```
Hello, Linux
```

### 4. 環境変数を使ったコマンド実行

以下のコマンドを入力して実行してみましょう：

```bash
MY_NAME="ユーザー" && echo "こんにちは、$MY_NAME さん"
```

実行結果：
```
こんにちは、ユーザー さん
```

このコマンドでは、一時的な変数`MY_NAME`を設定し、その値をechoコマンドの中で参照しています。`$`記号を使って変数の値を参照する方法は、シェルスクリプトでよく使われるテクニックです。

### 5. 環境変数の永続化（.bashrcファイルの編集）

現在のシェルセッションでのみ有効な環境変数を、ログイン時に毎回自動的に設定されるようにするには、`.bashrc`ファイルを編集します。

以下のコマンドを入力して実行してみましょう：

```bash
echo 'export GREETING="おはようございます"' >> ~/.bashrc
```

実行結果：
（表示なし）

このコマンドは、ホームディレクトリの`.bashrc`ファイルに新しい環境変数の設定を追加します。`>>`は既存ファイルへの追記を意味します。

変更を反映するには、以下のコマンドを実行するか、新しいターミナルを開きます：

```bash
source ~/.bashrc
```

実行結果：
（表示なし）

設定が反映されたか確認しましょう：

```bash
echo $GREETING
```

実行結果：
```
おはようございます
```

これで、新しいターミナルを開くたびに`GREETING`環境変数が自動的に設定されるようになりました。

### 6. PATH環境変数の活用

以下のコマンドを入力して実行してみましょう：

```bash
mkdir -p ~/bin
echo 'echo "自作コマンドが実行されました"' > ~/bin/mycommand
chmod +x ~/bin/mycommand
export PATH="$HOME/bin:$PATH"
```

実行結果：
（表示なし）

このコマンド群は以下の操作を行います：
1. ホームディレクトリに`bin`フォルダを作成
2. 簡単なスクリプトを`mycommand`として保存
3. スクリプトに実行権限を付与
4. PATHに新しいディレクトリを追加

作成したコマンドを実行してみましょう：

```bash
mycommand
```

実行結果：
```
自作コマンドが実行されました
```

これは、PATH環境変数にディレクトリを追加することで、そのディレクトリ内のプログラムをコマンド名だけで実行できるようになったことを示しています。

### 7. 環境変数のスコープ確認

環境変数は子プロセスに継承されますが、親プロセスには影響しません。確認してみましょう：

```bash
export TEST_VAR="親プロセスの変数"
bash -c 'echo "子プロセスでの変数値: $TEST_VAR"'
```

実行結果：
```
子プロセスでの変数値: 親プロセスの変数
```

このコマンドでは、新しいbashシェル（子プロセス）を起動し、親プロセスで設定した環境変数が子プロセスに引き継がれていることを確認しています。

以上が、Linux環境変数の基本的な使い方です。環境変数を活用することで、システムの動作をカスタマイズしたり、アプリケーション間で設定を共有したりすることができます。
