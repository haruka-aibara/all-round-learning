# リスト内包表記

## 概要

リスト内包表記はPythonで複雑なリストを簡潔かつ効率的に作成するための強力な機能です。

## 主要概念

リスト内包表記は `[式 for 要素 in イテラブル]` の形式で、forループを1行で表現できる構文です。

## Step by Step コード例

### 基本的なリスト内包表記

**このコードを入力して実行してみましょう：**

```python
# タプルからリストへの変換：従来の方法
numbers = (1, 2, 3, 4, 5)

result = []
for num in numbers:
    result.append(num)

print("従来の方法でのリスト変換:", result)

# リスト内包表記を使った方法
result = [num for num in numbers]
print("リスト内包表記での変換:", result)

# 最も簡単な方法
result = list(numbers)
print("list()関数を使った変換:", result)
```

**実行結果：**
```
従来の方法でのリスト変換: [1, 2, 3, 4, 5]
リスト内包表記での変換: [1, 2, 3, 4, 5]
list()関数を使った変換: [1, 2, 3, 4, 5]
```

**解説：**
単純にタプルからリストへ変換する場合は、`list()`関数を使うのが最もシンプルです。しかし、リスト内包表記は次のような複雑な処理で真価を発揮します。

### 条件付きリスト内包表記

**このコードを入力して実行してみましょう：**

```python
# 偶数だけを抽出：従来の方法
numbers = (1, 2, 3, 4, 5)

result = []
for num in numbers:
    if num % 2 == 0:  # 偶数の場合
        result.append(num)

print("従来の方法での偶数抽出:", result)

# リスト内包表記を使った条件付き抽出
result = [num for num in numbers if num % 2 == 0]
print("リスト内包表記での偶数抽出:", result)
```

**実行結果：**
```
従来の方法での偶数抽出: [2, 4]
リスト内包表記での偶数抽出: [2, 4]
```

**解説：**
リスト内包表記に条件を追加することで、特定の条件を満たす要素だけをリストに含めることができます。

### 複数のイテラブルを使用したリスト内包表記

**このコードを入力して実行してみましょう：**

```python
# 2つのタプルの要素を掛け合わせる：従来の方法
numbers1 = (1, 2, 3, 4, 5)
numbers2 = (5, 6, 7, 8, 9, 10)

result = []
for i in numbers1:
    for j in numbers2:
        result.append(i * j)

print("従来の方法での積のリスト:")
print(result)

# リスト内包表記を使った方法
result = [i * j for i in numbers1 for j in numbers2]
print("リスト内包表記での積のリスト:")
print(result)
```

**実行結果：**
```
従来の方法での積のリスト:
[5, 6, 7, 8, 9, 10, 10, 12, 14, 16, 18, 20, 15, 18, 21, 24, 27, 30, 20, 24, 28, 32, 36, 40, 25, 30, 35, 40, 45, 50]
リスト内包表記での積のリスト:
[5, 6, 7, 8, 9, 10, 10, 12, 14, 16, 18, 20, 15, 18, 21, 24, 27, 30, 20, 24, 28, 32, 36, 40, 25, 30, 35, 40, 45, 50]
```

**解説：**
複数のforループをネストして使うこともできますが、コードが複雑になりすぎると可読性が低下するため、適切な場面で使用するよう注意しましょう。

## 注意点

リスト内包表記は便利ですが、複雑になりすぎると読みにくくなります。コードの可読性のために、あまりに複雑な処理は通常のforループを使用することも検討しましょう。
