# リスト（List）

## 概要
リストはPythonの最も基本的かつ汎用性の高いデータ構造で、複数の要素を順序付けて格納できます。

## 主要概念
リストは変更可能（ミュータブル）で、異なる型のデータを混在させて格納でき、インデックスを使って各要素にアクセスできます。

## 実践コード例

### リストの基本操作

#### リストの作成と要素へのアクセス
```python
# リストを作成
numbers = [3, 6, 234, 3456]

# このコードを入力して実行してみましょう
print(numbers)        # リスト全体を表示
print(numbers[2])     # インデックス2（3番目）の要素を取得: 234
print(numbers[-1])    # 最後の要素を取得: 3456
print(numbers[0:3])   # スライス（インデックス0から2まで）: [3, 6, 234]

# 存在しないインデックスにアクセスするとエラーになります
# print(numbers[100])  # IndexError: list index out of range
```

実行結果:
```
[3, 6, 234, 3456]
234
3456
[3, 6, 234]
```

インデックスは0から始まり、負のインデックスは末尾からのカウントを表します。存在しないインデックスにアクセスすると`IndexError`が発生します。

#### リストの情報取得
```python
# このコードを入力して実行してみましょう
numbers = [3, 6, 234, 3456]
print(len(numbers))   # リストの長さを取得: 4
print(type(numbers))  # 型の確認: <class 'list'>
```

実行結果:
```
4
<class 'list'>
```

`len()`関数でリストの要素数を、`type()`関数でオブジェクトの型を確認できます。

#### スライスの応用
```python
# このコードを入力して実行してみましょう
numbers = [3, 6, 234, 3456]
print(numbers[::2])   # ステップ2で一つ飛ばし: [3, 234]
print(numbers[::-1])  # 逆順に表示: [3456, 234, 6, 3]
```

実行結果:
```
[3, 234]
[3456, 234, 6, 3]
```

`[start:stop:step]`形式でスライスを指定できます。ステップに負の値を使うと逆順になります。

### ネストしたリスト

```python
# このコードを入力して実行してみましょう
list_a = [1, 2, 3]
list_b = [4, 5, 6]
nested_list = [list_a, list_b]  # リストの中にリストを格納

print(nested_list)         # ネストしたリスト全体を表示
print(nested_list[0][2])   # 最初のリストの3番目の要素: 3
print(nested_list[1][1])   # 2番目のリストの2番目の要素: 5
```

実行結果:
```
[[1, 2, 3], [4, 5, 6]]
3
5
```

リストの中にリストを格納してネストさせることができます。複数のインデックスを使って内部の要素にアクセスします。

### リストの変更

#### 要素の変更
```python
# このコードを入力して実行してみましょう
my_list = [1, 2, 3]
print("変更前:", my_list)

# 要素の変更
my_list[0] = 'a'
print("変更後:", my_list)  # [a', 2, 3]

# スライスを空リストで置き換え（削除効果）
my_list[1:2] = []
print("要素削除後:", my_list)  # ['a', 3]
```

実行結果:
```
変更前: [1, 2, 3]
変更後: ['a', 2, 3]
要素削除後: ['a', 3]
```

リストは変更可能なので、インデックスを指定して要素を変更できます。スライスを空リストで置き換えると、その部分の要素が削除されます。

#### 要素の追加
```python
# このコードを入力して実行してみましょう
my_list = [1, 2, 3]
print("元のリスト:", my_list)

# 末尾に要素を追加
my_list.append("a")
print("append後:", my_list)  # [1, 2, 3, 'a']

# 指定位置に要素を挿入
my_list.insert(0, "b")  # インデックス0（先頭）に'b'を挿入
print("insert後:", my_list)  # ['b', 1, 2, 3, 'a']
```

実行結果:
```
元のリスト: [1, 2, 3]
append後: [1, 2, 3, 'a']
insert後: ['b', 1, 2, 3, 'a']
```

`append()`メソッドで末尾に、`insert()`メソッドで指定位置に要素を追加できます。

#### 要素の削除
```python
# このコードを入力して実行してみましょう
my_list = ['a', 'b', 'c', 'd', 'e']
print("元のリスト:", my_list)

# 末尾の要素を削除して返す
popped = my_list.pop()
print("末尾のpop後:", my_list)  # ['a', 'b', 'c', 'd']
print("取り出した要素:", popped)  # e

# インデックスを指定して削除
first = my_list.pop(0)  # 先頭要素を削除
print("先頭のpop後:", my_list)  # ['b', 'c', 'd']
print("取り出した先頭要素:", first)  # a

# del文による削除
del my_list[1]
print("del後:", my_list)  # ['b', 'd']

# 値を指定して最初に見つかった要素を削除
my_list = ['a', 'b', 'c', 'b', 'd']
my_list.remove('b')  # 最初の'b'を削除
print("remove後:", my_list)  # ['a', 'c', 'b', 'd']
```

実行結果:
```
元のリスト: ['a', 'b', 'c', 'd', 'e']
末尾のpop後: ['a', 'b', 'c', 'd']
取り出した要素: e
先頭のpop後: ['b', 'c', 'd']
取り出した先頭要素: a
del後: ['b', 'd']
remove後: ['a', 'c', 'b', 'd']
```

要素の削除には複数の方法があります：
- `pop()`: 末尾（または指定位置）の要素を取り出して削除
- `del`: インデックスを指定して削除
- `remove()`: 値を指定して最初に見つかった要素を削除

### リストの結合

```python
# このコードを入力して実行してみましょう
list_a = [1, 2, 3]
list_b = [4, 5, 6]

# リストの連結（新しいリストを作成）
combined = list_a + list_b
print("連結リスト:", combined)  # [1, 2, 3, 4, 5, 6]

# +=演算子で追加
original = [1, 2, 3]
original += [4, 5, 6]
print("+=後:", original)  # [1, 2, 3, 4, 5, 6]

# extendメソッド
list_a = [1, 2, 3]
list_a.extend(list_b)
print("extend後:", list_a)  # [1, 2, 3, 4, 5, 6]
```

実行結果:
```
連結リスト: [1, 2, 3, 4, 5, 6]
+=後: [1, 2, 3, 4, 5, 6]
extend後: [1, 2, 3, 4, 5, 6]
```

リストを結合する方法は3つあります：
- `+`演算子: 新しいリストを作成して返す
- `+=`演算子: 左側のリストに右側のリストを追加
- `extend()`メソッド: リストに別のリストの要素を追加

### リストの検索

```python
# このコードを入力して実行してみましょう
numbers = [1, 2, 3, 4, 5, 3, 6, 7]

# 要素のインデックスを検索
print("3のインデックス:", numbers.index(3))  # 最初の3の位置: 2
print("インデックス3以降の3:", numbers.index(3, 3))  # インデックス3以降の3の位置: 5

# 要素の出現回数をカウント
print("3の出現回数:", numbers.count(3))  # 2

# 要素の存在確認
if 5 in numbers:
    print("5は存在します")
```

実行結果:
```
3のインデックス: 2
インデックス3以降の3: 5
3の出現回数: 2
5は存在します
```

リスト内の要素を検索する方法：
- `index()`: 指定した値の（最初の）インデックスを返す
- `count()`: 指定した値の出現回数を返す
- `in`演算子: 要素が存在するかどうかを確認

### リストのソート

```python
# このコードを入力して実行してみましょう
numbers = [1, 2, 3, 4, 3, 1, 3, 7, 10, 5, 6, 7]
print("元のリスト:", numbers)

# 昇順にソート（リスト自体を変更）
numbers.sort()
print("昇順ソート後:", numbers)

# 降順にソート
numbers.sort(reverse=True)
print("降順ソート後:", numbers)

# リストを反転
numbers.reverse()
print("反転後:", numbers)
```

実行結果:
```
元のリスト: [1, 2, 3, 4, 3, 1, 3, 7, 10, 5, 6, 7]
昇順ソート後: [1, 1, 2, 3, 3, 3, 4, 5, 6, 7, 7, 10]
降順ソート後: [10, 7, 7, 6, 5, 4, 3, 3, 3, 2, 1, 1]
反転後: [1, 1, 2, 3, 3, 3, 4, 5, 6, 7, 7, 10]
```

`sort()`メソッドでリストを昇順または降順にソートでき、`reverse()`メソッドでリストの順序を反転できます。

### 文字列の分割とリスト

```python
# このコードを入力して実行してみましょう
text = "a is apple"

# 文字列を空白で分割してリストに変換
split_text = text.split(" ")
print("分割後:", split_text)  # ['a', 'is', 'apple']

# リストの要素を結合して文字列に変換
joined_text = ' '.join(split_text)
print("結合後:", joined_text)  # 'a is apple'
```

実行結果:
```
分割後: ['a', 'is', 'apple']
結合後: a is apple
```

`split()`メソッドで文字列をリストに分割し、`join()`メソッドでリストの要素を結合して文字列に戻せます。

### リストのコピーと参照

```python
# このコードを入力して実行してみましょう
# 参照の例（同じオブジェクトを指している）
numbers = [1, 2, 3, 4, 5]
numbers_ref = numbers  # 参照のコピー

numbers_ref[0] = 100  # 参照先の変更
print("numbers:", numbers)       # [100, 2, 3, 4, 5]
print("numbers_ref:", numbers_ref)  # [100, 2, 3, 4, 5]

# copyメソッドによる複製
numbers = [1, 2, 3, 4, 5]
numbers_copy = numbers.copy()  # 内容のコピー

numbers_copy[0] = 100  # コピーの変更は元に影響しない
print("numbers:", numbers)       # [1, 2, 3, 4, 5]
print("numbers_copy:", numbers_copy)  # [100, 2, 3, 4, 5]

# リストと基本型のIDの違い
# 数値の場合
x = 5
y = x
y = 100  # yの変更はxに影響しない

print("x:", x)  # 5
print("y:", y)  # 100

# IDを確認
print("x ID:", id(x))
print("y ID:", id(y))  # 異なるIDになる

# リストの場合
list1 = [1, 2, 3]
list2 = list1  # 参照コピー

print("list1:", list1)  # [1, 2, 3]
print("list2:", list2)  # [1, 2, 3]
print("list1 ID:", id(list1))
print("list2 ID:", id(list2))  # 同じIDを示す
```

実行結果:
```
numbers: [100, 2, 3, 4, 5]
numbers_ref: [100, 2, 3, 4, 5]
numbers: [1, 2, 3, 4, 5]
numbers_copy: [100, 2, 3, 4, 5]
x: 5
y: 100
x ID: 140735487117136
y ID: 140735487119936
list1: [1, 2, 3]
list2: [1, 2, 3]
list1 ID: 140735476449600
list2 ID: 140735476449600
```

Pythonではリストは参照型なので、単純に代入すると同じオブジェクトを指します。変更は元のリストにも反映されます。独立したコピーを作るには`copy()`メソッドを使います。一方、数値や文字列などの基本型は参照ではなく値そのものが扱われるため、変更が他の変数に影響しません。
