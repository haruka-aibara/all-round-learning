# 標準ライブラリ

## 概要
Python標準ライブラリはPythonインストール時に一緒についてくる便利な機能群で、追加インストールなしで幅広いタスクを実行できます。

## 主要概念
標準ライブラリは「バッテリー同梱（batteries included）」の思想に基づき、日常的なプログラミングタスクを簡単に解決するためのモジュール集です。

## 実践：標準ライブラリを使ってみよう

### 標準ライブラリの確認方法

標準ライブラリは以下サイトなどで確認できます：
```python
# https://docs.python.org/ja/3.13/library/index.html
```

このURLにアクセスすると、Python標準ライブラリの公式ドキュメントが表示され、利用可能なすべてのモジュールとその使い方を確認できます。

### collections モジュールの紹介

今回は標準ライブラリの一つである `collections` モジュールに注目してみましょう。特に `defaultdict` を使って文字の出現頻度を数える例を見ていきます。

#### 例題：文字列内の各文字の出現回数を数える

以下の適当な文字列を用意します：

```python
s = "aergaorg;aiojrgaaganierganoi"
```

#### 方法1: 通常の辞書を使った方法（非効率）

このコードを入力して実行してみましょう：

```python
# それぞれの文字が何個あるか？ただしこれでやるべきではない
d = {}

for c in s:
    if c not in d:
        d[c] = 0
    d[c] += 1
    
print(d)
```

**実行結果**:
```
{'a': 6, 'e': 2, 'r': 4, 'g': 5, 'o': 2, ';': 1, 'i': 3, 'j': 1, 'n': 2}
```

この方法では、各文字が辞書に存在するかどうかを毎回チェックする必要があり、冗長です。

#### 方法2: setdefault() を使った方法（改善版）

このコードを入力して実行してみましょう：

```python
# これでも実行可能ですが、まだ複雑です。
d = {}

for c in s:
    d.setdefault(c, 0)
    d[c] += 1
    
print(d)
```

**実行結果**:
```
{'a': 6, 'e': 2, 'r': 4, 'g': 5, 'o': 2, ';': 1, 'i': 3, 'j': 1, 'n': 2}
```

`setdefault()` メソッドを使うと、キーが存在しない場合にデフォルト値を設定できますが、まだ2行のコードが必要です。

#### 方法3: collections.defaultdict を使った方法（よりよい方法）

このコードを入力して実行してみましょう：

```python
# これがよい 標準ライブラリはimportが必要
from collections import defaultdict

d = defaultdict(int)

for c in s:
    d[c] += 1
    
print(d)
```

**実行結果**:
```
defaultdict(<class 'int'>, {'a': 6, 'e': 2, 'r': 4, 'g': 5, 'o': 2, ';': 1, 'i': 3, 'j': 1, 'n': 2})
```

`defaultdict` を使うと、存在しないキーにアクセスした時に自動的にデフォルト値（この場合は0）が設定されるため、コードがシンプルになります。`int` をコンストラクタに渡すことで、新しいキーのデフォルト値として `int()` の結果（つまり0）が使われます。

#### 特定の文字の出現回数を確認する

このコードを入力して実行してみましょう：

```python
# 'a' が何個あるか確認
print(d['a'])
```

**実行結果**:
```
6
```

この例では 'a' が6回出現していることがわかります。

### まとめ

Python標準ライブラリの `collections` モジュールにある `defaultdict` を使うことで、頻度カウントなどの一般的なタスクをより簡潔に記述できることがわかりました。標準ライブラリを活用することで、コードの可読性と効率が向上します。
