# Linux講座：Vimの使い方

## 1. Vimの概要と重要性
Vimはテキストエディタの一種で、コマンドラインから操作でき、高速で効率的なテキスト編集が可能なため、多くのLinuxユーザーに愛用されています。

## 2. Vimの主要概念
Vimには「ノーマルモード」「挿入モード」「ビジュアルモード」「コマンドモード」の4つの主要モードがあり、これらを切り替えながら編集作業を行います。

## 3. 実践！Vimコマンド例

### 3.1 Vimの起動と終了

#### Vimの起動
```bash
vim ファイル名
```

このコマンドを入力して実行してみましょう。「ファイル名」の部分に実際のファイル名を入れると、そのファイルを編集できます。新しいファイルの場合は、保存時に作成されます。

#### Vimの終了
Vimを終了するには、まずノーマルモードに切り替えます（ESCキーを押す）。
その後、以下のコマンドを入力します：

```
:q
```

このコマンドを入力して実行してみましょう。変更がない場合は終了します。
変更があると警告が表示されます。変更を破棄して終了するには：

```
:q!
```

ファイルを保存して終了するには：

```
:wq
```

または

```
ZZ
```

### 3.2 テキストの編集

#### 挿入モードに入る
ノーマルモードから挿入モードに切り替えるには、以下のコマンドを入力します：

```
i
```

このコマンドを入力して実行してみましょう。カーソル位置からテキストを入力できるようになります。

他の挿入モードコマンド：
- `a` - カーソルの後ろから挿入
- `I` - 行の先頭から挿入
- `A` - 行の末尾から挿入
- `o` - カーソルの下に新しい行を作成して挿入
- `O` - カーソルの上に新しい行を作成して挿入

挿入モードを終了するには、ESCキーを押します。

#### テキストの削除
ノーマルモードで以下のコマンドを入力します：

```
x
```

このコマンドを入力して実行してみましょう。カーソル位置の文字が削除されます。

他の削除コマンド：
- `dd` - 現在の行を削除
- `dw` - カーソル位置から単語の終わりまでを削除
- `d$` または `D` - カーソル位置から行末までを削除

#### テキストのコピーと貼り付け
行全体をコピーするには、ノーマルモードで以下のコマンドを入力します：

```
yy
```

このコマンドを入力して実行してみましょう。現在の行がコピーされます。

テキストを貼り付けるには：

```
p
```

このコマンドを入力して実行してみましょう。コピーしたテキストがカーソル位置の後に貼り付けられます。

### 3.3 カーソル移動

基本的なカーソル移動コマンド（ノーマルモードで）：

- `h` - 左に移動
- `j` - 下に移動
- `k` - 上に移動
- `l` - 右に移動

このコマンドを入力して実行してみましょう。カーソルが指定した方向に移動します。

その他の移動コマンド：

- `0` - 行の先頭に移動
- `$` - 行の末尾に移動
- `w` - 次の単語の先頭に移動
- `b` - 前の単語の先頭に移動
- `G` - ファイルの最後の行に移動
- `gg` - ファイルの最初の行に移動
- `:{数字}` - 指定した行番号に移動

例えば、10行目に移動するには：

```
:10
```

このコマンドを入力して実行してみましょう。カーソルが10行目に移動します。

### 3.4 検索と置換

#### テキストの検索
ノーマルモードで以下のコマンドを入力します：

```
/検索したい文字列
```

このコマンドを入力して実行してみましょう。指定した文字列が強調表示されます。

- `n` - 次の一致に移動
- `N` - 前の一致に移動

#### テキストの置換
行内の最初の一致を置換：

```
:s/置換前の文字列/置換後の文字列/
```

このコマンドを入力して実行してみましょう。現在の行にある最初の「置換前の文字列」が「置換後の文字列」に置換されます。

行内のすべての一致を置換：

```
:s/置換前の文字列/置換後の文字列/g
```

ファイル全体のすべての一致を置換：

```
:%s/置換前の文字列/置換後の文字列/g
```

このコマンドを入力して実行してみましょう。ファイル全体の「置換前の文字列」がすべて「置換後の文字列」に置換されます。

### 3.5 ファイルの保存

ファイルを保存するには、ノーマルモードで以下のコマンドを入力します：

```
:w
```

このコマンドを入力して実行してみましょう。現在のファイルが保存されます。

別名で保存する場合：

```
:w 新しいファイル名
```

このコマンドを入力して実行してみましょう。「新しいファイル名」という名前で保存されます。

### 3.6 複数ファイルの操作

#### 画面分割
水平分割：

```
:split ファイル名
```

または

```
:sp ファイル名
```

垂直分割：

```
:vsplit ファイル名
```

または

```
:vsp ファイル名
```

このコマンドを入力して実行してみましょう。画面が分割され、指定したファイルが開きます。

分割画面間の移動：

```
Ctrl + w, 方向キー(h, j, k, l)
```

例えば、右の画面に移動するには `Ctrl + w, l` のように入力します。

#### タブの操作
新しいタブを開く：

```
:tabnew ファイル名
```

タブ間の移動：

```
:tabnext
```

または

```
gt
```

前のタブに戻る：

```
:tabprevious
```

または

```
gT
```

このコマンドを入力して実行してみましょう。タブが切り替わります。

### 3.7 便利な機能

#### オートインデント
あるコードブロックをインデントするには、ビジュアルモードで選択してから：

```
=
```

このコマンドを入力して実行してみましょう。選択したコードが適切にインデントされます。

#### 一時中断と復帰
Vimを一時中断するには：

```
:suspend
```

または

```
Ctrl + z
```

シェルに戻り、Vimに復帰するには：

```
fg
```

このコマンドを入力して実行してみましょう。Vimが一時中断され、シェルに戻ります。`fg`を実行するとVimに復帰します。
