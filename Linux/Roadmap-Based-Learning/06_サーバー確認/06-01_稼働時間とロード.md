# Linux講座：稼働時間とロード

## 概要
システムの稼働時間とロードは、Linuxサーバーの健全性と性能を監視するための重要な指標です。

## 理論
稼働時間はシステムが再起動せずに動作している期間を示し、ロードアベレージはCPUの処理待ち状態にあるプロセスの数を表します。

## コマンド例と実行方法

### 1. uptimeコマンド

このコマンドを入力して実行してみましょう：

```bash
uptime
```

期待される出力例：
```
 10:58:35 up 2 days, 20 min,  1 user,  load average: 0.00, 0.01, 0.05
```

**解説**：
- `10:58:35`：現在の時刻
- `up 2 days, 20 min`：システムが稼働している期間（2日と20分）
- `1 user`：現在ログインしているユーザー数
- `load average: 0.00, 0.01, 0.05`：過去1分、5分、15分間のロードアベレージ

### 2. w コマンド

このコマンドを入力して実行してみましょう：

```bash
w
```

期待される出力例：
```
 11:00:00 up 2 days, 22 min,  1 user,  load average: 0.00, 0.01, 0.05
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
user1    pts/0    192.168.1.5      10:38    0.00s  0.04s  0.00s w
```

**解説**：
- uptimeと同じ情報に加え、ログインユーザーの詳細情報が表示されます
- ロードアベレージも確認できます

### 3. topコマンドでリアルタイムのロード確認

このコマンドを入力して実行してみましょう：

```bash
top
```

期待される出力例（最上部）：
```
top - 11:05:22 up 2 days, 27 min,  1 user,  load average: 0.01, 0.02, 0.05
Tasks: 187 total,   1 running, 186 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.7 sy,  0.0 ni, 98.7 id,  0.3 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   3950.0 total,   2238.1 free,    876.5 used,    835.4 buff/cache
MiB Swap:   2048.0 total,   2048.0 free,      0.0 used.   2827.5 avail Mem
```

**解説**：
- 終了するには `q` キーを押します
- 上部にuptimeと同じ情報が表示され、リアルタイムで更新されます
- ロードアベレージが高い場合はリソース使用率も確認できます

### 4. cat /proc/loadavgでロード情報の取得

このコマンドを入力して実行してみましょう：

```bash
cat /proc/loadavg
```

期待される出力例：
```
0.00 0.01 0.05 1/233 12345
```

**解説**：
- 最初の3つの数字：1分、5分、15分間のロードアベレージ
- 4番目の値「1/233」：実行中のプロセス数/総プロセス数
- 最後の数字：最後に作成されたプロセスID

### 5. ロードアベレージの解釈

ロードアベレージの値は、システムのCPUコア数と比較して評価します：

- CPUコア数を確認するコマンドを実行してみましょう：

```bash
nproc
```

期待される出力例（4コアCPUの場合）：
```
4
```

**解説**：
- ロードアベレージがCPUコア数を下回っている場合、システムは余裕があります
- ロードアベレージがCPUコア数に近い場合、システムはほぼフル稼働しています
- ロードアベレージがCPUコア数を大幅に超える場合、システムは過負荷状態です
