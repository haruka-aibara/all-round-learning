# Git と GitHub におけるマージの基本

## 概要
マージはブランチ間で変更を統合するGitの重要な機能であり、効率的なチーム開発を可能にします。

## マージとは
マージとはGitにおいて、あるブランチ（ソース）から別のブランチ（ターゲット）へ変更を結合するプロセスです。ブランチ間の更新を統合したい場合にマージを実行します。これには、もし存在するならブランチ間の競合を解決することも含まれます。マージの目的は、両方のブランチからの変更を組み合わせた新しいコミットを作成し、プロジェクトのための一貫した履歴を作ることです。

## マージの基本手順

1. **マージ先ブランチに移動する**
   ```bash
   git checkout main  # マージ先ブランチ（例：main）に切り替え
   ```

2. **マージを実行する**
   ```bash
   git merge feature-branch  # feature-branchの変更をmainブランチに統合
   ```

3. **競合がある場合は解決する**
   - 競合が発生した場合、Gitは自動的に解決できません
   - 競合ファイルを手動で編集して解決します
   - 解決後、変更をステージングしてコミットします
   ```bash
   git add <競合したファイル>
   git commit -m "競合を解決してマージを完了"
   ```

## マージの種類

### Fast-Forward マージ
- 最も単純なマージタイプ
- ターゲットブランチが統合元ブランチの直接の親である場合に発生
- コミット履歴が直線的になる
- 例: 
  ```bash
  git merge --ff feature-branch  # デフォルトはfast-forwardマージ
  ```

### 非Fast-Forward マージ（ブランチの履歴を保持）
- 常に新しいマージコミットを作成
- ブランチの履歴を明示的に保持したい場合に有効
- 例:
  ```bash
  git merge --no-ff feature-branch
  ```

### Squashマージ
- ブランチの全ての変更を1つのコミットにまとめる
- 履歴をシンプルに保ちたい場合に便利
- 例:
  ```bash
  git merge --squash feature-branch
  git commit -m "feature-branchの全ての変更をマージ"
  ```

## GitHub上でのマージ

1. **プルリクエストの作成**
   - ソースブランチからターゲットブランチへの変更提案

2. **マージ方法の選択**
   - Create a merge commit（通常のマージコミット）
   - Squash and merge（変更をまとめる）
   - Rebase and merge（履歴を線形に保つ）

3. **プルリクエストの完了**
   - レビュー後、「Merge pull request」ボタンをクリック
   - 必要に応じてブランチを削除

## マージ時の一般的な問題と解決法

### マージ競合
- 同じファイルの同じ部分が両方のブランチで変更された場合に発生
- 解決策: 手動で競合を解決し、変更をコミットする

### マージの取り消し
- マージ直後の場合
  ```bash
  git reset --hard HEAD~1  # 最後のコミット（マージコミット）を取り消す
  ```
- マージコミットが特定できる場合
  ```bash
  git revert -m 1 <マージコミットのハッシュ>
  ```

## ベストプラクティス

1. マージ前に最新の変更を取り込む
   ```bash
   git checkout feature-branch
   git pull origin main  # mainブランチの最新変更を取り込む
   ```

2. マージ前にテストを実行する
3. 小さく頻繁にマージする
4. 明確なコミットメッセージを使用する
