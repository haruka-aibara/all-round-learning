# Gitスタッシュの基本

## はじめに

「作業中に急に別のブランチに切り替える必要が出てきたけど、まだコミットしたくない変更がある...」
「デバッグ中に別の機能を試してみたいけど、今の変更をどうすればいいの？」

こんな悩みを抱えたことはありませんか？Gitのスタッシュ機能を使えば、これらの問題を簡単に解決できます。この記事では、Gitスタッシュの基本的な使い方から実践的な活用方法までを解説します。

## ざっくり理解しよう

Gitスタッシュの重要なポイントは以下の3つです：

1. **一時的な保存場所**
   - コミットせずに変更を一時保存できる
   - 作業ディレクトリをクリーンな状態に戻せる

2. **スタック構造**
   - 複数のスタッシュを積み重ねて保存可能
   - 後入れ先出し（LIFO）の原則で管理

3. **柔軟な適用方法**
   - 元のブランチに戻すことも可能
   - 別のブランチに適用することも可能

## 実際の使い方

### よくある使用シーン

1. **緊急のバグ修正時**
   - 現在の作業を一時保存
   - バグ修正ブランチに切り替え
   - 修正後に元の作業に戻る

2. **機能の試行錯誤時**
   - 現在の実装を一時保存
   - 別のアプローチを試す
   - 気に入った方を採用

3. **コードレビュー対応時**
   - レビュー対応の変更を一時保存
   - 新しい機能の開発を続行
   - レビュー対応後に変更を適用

## 手を動かしてみよう

### 基本的な使い方

1. 変更をスタッシュに保存
```bash
git stash save "作業中の変更"
```

2. スタッシュの一覧を確認
```bash
git stash list
```

3. 最新のスタッシュを適用
```bash
git stash apply
```

4. スタッシュを削除
```bash
git stash drop
```

## 実践的なサンプル

### スタッシュの詳細な操作

```bash
# 変更をスタッシュに保存（メッセージ付き）
git stash save "新機能の実装中"

# スタッシュの内容を確認
git stash show -p

# 特定のスタッシュを適用（例：2番目のスタッシュ）
git stash apply stash@{1}

# スタッシュを適用して削除
git stash pop

# すべてのスタッシュを削除
git stash clear
```

## 困ったときは

### よくあるトラブルと解決方法

1. **スタッシュの競合**
   - 問題：適用時に競合が発生
   - 解決：手動で競合を解決後、`git stash drop`で古いスタッシュを削除

2. **スタッシュの紛失**
   - 問題：誤ってスタッシュを削除
   - 解決：`git fsck`で失われたスタッシュを探す

3. **適用先の間違い**
   - 問題：誤ったブランチにスタッシュを適用
   - 解決：`git reset --hard`で変更を破棄し、正しいブランチで再適用

## もっと知りたい人へ

### 次のステップ

- スタッシュの高度な使い方（特定のファイルのみスタッシュ）
- スタッシュのブランチ化
- スタッシュのパッチとしての活用

### おすすめの学習リソース

- [Git公式ドキュメント](https://git-scm.com/docs/git-stash)
- [Pro Git Book](https://git-scm.com/book/ja/v2)
- [GitHub Docs](https://docs.github.com/ja)

### コミュニティ情報

- [Stack Overflow](https://stackoverflow.com/questions/tagged/git-stash)
- [GitHub Discussions](https://github.com/git/git/discussions)
