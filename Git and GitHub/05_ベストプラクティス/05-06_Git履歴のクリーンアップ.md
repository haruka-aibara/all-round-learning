# Git履歴のクリーンアップ

## はじめに
コミット履歴が乱雑になると、変更の追跡が難しくなり、チーム開発の効率が低下します。この記事では、Git履歴を整理し、クリーンな状態を維持する方法について解説します。

## ざっくり理解しよう
1. **整理**: 関連する変更をまとめる
2. **明確性**: 変更の意図が分かりやすい
3. **安全性**: 履歴の改変を安全に行う

## 実際の使い方
### よくある使用シーン
- コミットの統合
- コミットメッセージの修正
- 不要なコミットの削除
- ブランチの整理

### メリット
- 変更履歴の可読性向上
- コードレビューの効率化
- リリース管理の容易化

## 手を動かしてみよう
### 基本的なコマンド
1. コミットの統合
   ```bash
   git rebase -i HEAD~3  # 直近3つのコミットを統合
   ```

2. コミットメッセージの修正
   ```bash
   git commit --amend    # 直前のコミットメッセージを修正
   ```

3. 不要なコミットの削除
   ```bash
   git reset --hard HEAD~1  # 直前のコミットを削除
   ```

## 実践的なサンプル
```bash
# 複数のコミットを1つにまとめる
git rebase -i HEAD~3

# エディタで以下のように編集
pick f7f3f6d 最初のコミット
squash 310154e 2番目のコミット
squash a5f4a0d 3番目のコミット

# コミットメッセージの修正
git commit --amend -m "feat: ユーザー認証機能の追加"

# 特定のファイルの変更を取り消す
git checkout HEAD -- path/to/file
```

## 困ったときは
### よくある問題
1. リベースの競合
   - 解決策: 競合を解決してから続行
   - 解決策: リベースを中止して再試行

2. 履歴の改変による問題
   - 解決策: 共有ブランチでの履歴改変を避ける
   - 解決策: バックアップブランチの作成

3. コミットの取り消し
   - 解決策: `git revert`を使用
   - 解決策: 新しいコミットで修正

## もっと知りたい人へ
- [Gitの履歴を書き換える](https://git-scm.com/book/ja/v2/Git-%E3%81%AE%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E6%A9%9F%E8%83%BD-%E3%83%AA%E3%83%99%E3%83%BC%E3%82%B9)
- [Gitの履歴を整理する](https://git-scm.com/book/ja/v2/Git-%E3%81%AE%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E6%A9%9F%E8%83%BD-%E3%83%AA%E3%83%99%E3%83%BC%E3%82%B9)
- [Gitの履歴を安全に改変する](https://git-scm.com/book/ja/v2/Git-%E3%81%AE%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E6%A9%9F%E8%83%BD-%E3%83%AA%E3%83%99%E3%83%BC%E3%82%B9)
